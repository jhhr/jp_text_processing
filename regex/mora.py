import re

# Palatilized (拗音) mora and other non-straight mora
PALATALIZED_MORA = [
    "くぃ",
    "きゃ",
    "きゅ",
    "きぇ",
    "きょ",
    "ぐぃ",
    "ぎゃ",
    "ぎゅ",
    "ぎぇ",
    "ぎょ",
    "すぃ",
    "しゃ",
    "しゅ",
    "しぇ",
    "しょ",
    "ずぃ",
    "じゃ",
    "じゅ",
    "じぇ",
    "じょ",
    "てぃ",
    "とぅ",
    "ちゃ",
    "ちゅ",
    "ちぇ",
    "ちょ",
    "でぃ",
    "どぅ",
    "ぢゃ",
    "でゅ",
    "ぢゅ",
    "ぢぇ",
    "ぢょ",
    "つぁ",
    "つぃ",
    "つぇ",
    "つぉ",
    "づぁ",
    "づぃ",
    "づぇ",
    "づぉ",
    "ひぃ",
    "ほぅ",
    "ひゃ",
    "ひゅ",
    "ひぇ",
    "ひょ",
    "びぃ",
    "びゃ",
    "びゅ",
    "びぇ",
    "びょ",
    "ぴぃ",
    "ぴゃ",
    "ぴゅ",
    "ぴぇ",
    "ぴょ",
    "ふぁ",
    "ふぃ",
    "ふぇ",
    "ふぉ",
    "ゔぁ",
    "ゔぃ",
    "ゔぇ",
    "ゔぉ",
    "ぬぃ",
    "にゃ",
    "にゅ",
    "にぇ",
    "にょ",
    "むぃ",
    "みゃ",
    "みゅ",
    "みぇ",
    "みょ",
    "るぃ",
    "りゃ",
    "りゅ",
    "りぇ",
    "りょ",
    "いぇ",
]
SINGLE_KANA_MORA = [
    "か",
    "く",
    "け",
    "こ",
    "き",
    "が",
    "ぐ",
    "げ",
    "ご",
    "ぎ",
    "さ",
    "す",
    "せ",
    "そ",
    "し",
    "ざ",
    "ず",
    "づ",
    "ぜ",
    "ぞ",
    "じ",
    "ぢ",
    "た",
    "と",
    "て",
    "ち",
    "だ",
    "で",
    "ど",
    "つ",
    "は",
    "へ",
    "ほ",
    "ひ",
    "ば",
    "ぶ",
    "べ",
    "ぼ",
    "ぼ",
    "び",
    "ぱ",
    "ぷ",
    "ぺ",
    "ぽ",
    "ぴ",
    "ふ",
    "ゔ",
    "な",
    "ぬ",
    "ね",
    "の",
    "に",
    "ま",
    "む",
    "め",
    "も",
    "み",
    "ら",
    "る",
    "れ",
    "ろ",
    "り",
    "あ",
    "い",
    "う",
    "え",
    "お",
    "や",
    "ゆ",
    "よ",
    "わ",
    "ゐ",
    "ゑ",
    "を",
]
# Elongated vowels of the single kana mora (直音)
LONG_STRAIGHT_MORA = [f"{kana}ー" for kana in SINGLE_KANA_MORA]
# Same for palatalized mora
LONG_PALATALIZED_MORA = [f"{kana}ー" for kana in PALATALIZED_MORA]
# Sort mora by length descending to match longest first, so that longer mora are matched first
# in the regex.
ALL_MORA = (
    LONG_PALATALIZED_MORA
    + PALATALIZED_MORA
    + LONG_STRAIGHT_MORA
    + SINGLE_KANA_MORA
    + [
        "ん",
    ]
)
# Add the small tsu versions of all mora to be matched first
ALL_MORA_RE = "|".join([m + "っ" for m in ALL_MORA] + ALL_MORA)
ALL_MORA_REC = re.compile(rf"({ALL_MORA_RE})")

# When converting a long vowel mark ー back to a vowel,
# the previous vowel determines the actual vowel sound.
LONG_VOWEL_MAP = {
    # All single kana mora mapped to their vowel sounds
    "か": "あ",
    "く": "う",
    "け": "お",
    "こ": "お",
    "き": "い",
    "が": "あ",
    "ぐ": "う",
    "げ": "お",
    "ご": "お",
    "ぎ": "い",
    "さ": "あ",
    "す": "う",
    "せ": "え",
    "そ": "お",
    "し": "い",
    "ざ": "あ",
    "ず": "う",
    "づ": "う",
    "ぜ": "え",
    "ぞ": "お",
    "じ": "い",
    "ぢ": "い",
    "た": "あ",
    "と": "お",
    "て": "え",
    "ち": "い",
    "だ": "あ",
    "で": "え",
    "ど": "お",
    "つ": "う",
    "は": "あ",
    "へ": "え",
    "ほ": "お",
    "ひ": "い",
    "ば": "あ",
    "ぶ": "う",
    "べ": "え",
    "ぼ": "お",
    "び": "い",
    "ぱ": "あ",
    "ぷ": "う",
    "ぺ": "え",
    "ぽ": "お",
    "ぴ": "い",
    "ふ": "う",
    "ゔ": "う",
    "な": "あ",
    "ぬ": "う",
    "ね": "え",
    "の": "お",
    "に": "い",
    "ま": "あ",
    "む": "う",
    "め": "え",
    "も": "お",
    "み": "い",
    "ら": "あ",
    "る": "う",
    "れ": "え",
    "ろ": "お",
    "り": "い",
    "あ": "あ",
    "い": "い",
    "う": "う",
    "え": "え",
    "お": "お",
    "や": "あ",
    "ゆ": "う",
    "よ": "お",
    "わ": "あ",
    "ゐ": "い",
    "ゑ": "え",
    "を": "お",
    # All small vowel kana, these would be used in palatalized mora
    "ぁ": "あ",
    "ぃ": "い",
    "ぅ": "う",
    "ぇ": "え",
    "ぉ": "お",
}
